<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ë…¼ë¬¸ìš© ê·¸ë˜í”„ ìƒì„±ê¸° | ë°˜ì‘í˜•</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.plot.ly/plotly-2.25.2.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
  <style>
    .card { background: white; border-radius: 0.75rem; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border: 1px solid #e5e7eb; padding: 1.25rem; }
    .nav-tab { transition: all 0.2s; cursor: pointer; border-radius: 0.5rem 0.5rem 0 0; }
    #previewArea { min-height: 400px; background-image: radial-gradient(#e5e7eb 1px, transparent 1px); background-size: 20px 20px; }
  </style>
</head>
<body class="bg-slate-50 text-slate-900 min-h-screen">
  <div class="max-w-7xl mx-auto p-4 md:p-8">
    <header class="mb-8 text-center md:text-left">
      <h1 class="text-3xl font-extrabold text-slate-800 tracking-tight">Paper Graph Generator</h1>
      <p class="text-slate-500 mt-2">ì—‘ì…€ ë°ì´í„°ë¥¼ ë…¼ë¬¸ ê·œê²©ì˜ PNGë¡œ ë³€í™˜í•©ë‹ˆë‹¤.</p>
    </header>

    <div class="flex space-x-1 border-b border-slate-200 mb-6 overflow-x-auto">
      <button id="tab-upload" class="nav-tab px-6 py-2.5 text-sm font-bold bg-blue-600 text-white whitespace-nowrap">1. ë°ì´í„° ë° ì¶• ì„¤ì •</button>
      <button id="tab-edit" class="nav-tab px-6 py-2.5 text-sm font-bold bg-slate-200 text-slate-600 hover:bg-slate-300 whitespace-nowrap">2. ìŠ¤íƒ€ì¼ ì •ë°€ ìˆ˜ì •</button>
    </div>

    <div id="panel-upload" class="space-y-6">
      <div class="card">
        <h2 class="text-lg font-bold mb-4 flex items-center gap-2">ğŸ“‚ ë°ì´í„° íŒŒì¼ ì—…ë¡œë“œ</h2>
        <div class="flex flex-col md:flex-row gap-4">
          <input id="fileInput" type="file" accept=".xlsx,.xls" class="block w-full text-sm text-slate-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100" />
          <button id="btnLoad" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition shadow-sm">ë°ì´í„° ë¡œë“œ</button>
        </div>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card border-l-4 border-l-blue-500">
          <h3 class="font-bold text-sm text-blue-800 mb-4 uppercase tracking-wider">Xì¶• (ë…ë¦½ ë³€ìˆ˜)</h3>
          <div class="space-y-4">
            <div><label class="text-[11px] font-bold text-slate-400">Main X-Axis</label><select id="xAxisMain" class="w-full border p-2.5 rounded-md text-sm bg-slate-50"></select></div>
            <div><label class="text-[11px] font-bold text-slate-400">Sub X-Axis (Optional)</label><select id="xAxisSub" class="w-full border p-2.5 rounded-md text-sm bg-slate-50"></select></div>
          </div>
        </div>
        <div class="card border-l-4 border-l-emerald-500">
          <h3 class="font-bold text-sm text-emerald-800 mb-4 uppercase tracking-wider">Yì¶• (ì¢…ì† ë³€ìˆ˜)</h3>
          <div class="space-y-4">
            <div><label class="text-[11px] font-bold text-slate-400">Main Y-Axis</label><select id="yAxisMain" class="w-full border p-2.5 rounded-md text-sm bg-slate-50"></select></div>
            <div><label class="text-[11px] font-bold text-slate-400">Secondary Y-Axis (Right)</label><select id="yAxisSub" class="w-full border p-2.5 rounded-md text-sm bg-slate-50"></select></div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-4">
          <h3 class="font-bold text-slate-800">ğŸ“Š ë°ì´í„° ê³„ì—´ ì„ íƒ</h3>
          <button id="btnSwapAxis" class="flex items-center gap-2 px-4 py-2 bg-amber-50 text-amber-700 border border-amber-200 rounded-full text-xs font-bold hover:bg-amber-100 transition">
            <span id="swapIcon">ğŸ”„</span> <span id="swapText">ì¶• êµì°¨ ì „í™˜ (Swap X-Y) Off</span>
          </button>
        </div>
        <div id="columnsArea" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-3 p-4 border rounded-xl bg-slate-50 max-h-64 overflow-y-auto"></div>
      </div>

      <div class="flex flex-col md:flex-row gap-4 items-stretch md:items-end">
        <div class="md:w-1/4">
          <label class="block text-sm font-bold mb-2">ê¸°ë³¸ ê·¸ë˜í”„ íƒ€ì…</label>
          <select id="chartType" class="w-full border p-3 rounded-lg bg-white shadow-sm font-medium">
            <option value="scatter">ë¶„ì‚°í˜•/ì„ í˜• (Scatter/Line)</option>
            <option value="bar">ë§‰ëŒ€í˜• (Bar Chart)</option>
          </select>
        </div>
        <button id="btnPlot" class="flex-1 py-4 bg-slate-800 text-white rounded-lg font-bold text-lg hover:bg-slate-900 shadow-lg transition transform active:scale-[0.98]">ê·¸ë˜í”„ ìƒì„± ë° ì‹œê°í™”</button>
      </div>
    </div>

    <div id="panel-edit" class="hidden space-y-6">
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div class="card">
          <div class="font-bold border-b pb-2 mb-4">ì¶• ë¼ë²¨ ë° ë²”ìœ„</div>
          <div class="space-y-3">
            <input id="titleInput" placeholder="ê·¸ë˜í”„ ì œëª© (Title)" class="w-full border p-2 text-sm rounded" />
            <div id="xlabels-container" class="space-y-2"></div>
            <div id="ylabels-container" class="space-y-2 border-t pt-2"></div>
            <div class="flex gap-4 pt-2">
              <label class="inline-flex items-center text-xs font-medium"><input id="xlog" type="checkbox" class="mr-2 rounded" /> X-ì¶• Log Scale</label>
              <label class="inline-flex items-center text-xs font-medium"><input id="yinvert" type="checkbox" class="mr-2 rounded" /> Y-ì¶• ë°˜ì „ (Invert)</label>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="font-bold border-b pb-2 mb-4">ìŠ¤íƒ€ì¼ ê°€ì´ë“œ</div>
          <div class="space-y-5">
            <div>
              <label class="text-xs font-bold text-slate-500 block mb-2 uppercase">Background & Grid</label>
              <div class="flex items-center gap-4">
                <label class="inline-flex items-center text-sm"><input id="gridToggle" type="checkbox" class="mr-2" /> ëˆˆê¸ˆì„  í‘œì‹œ</label>
                <input id="gridColor" type="color" value="#f0f0f0" class="h-8 w-16 rounded border cursor-pointer" />
              </div>
            </div>
            <div>
              <label class="text-xs font-bold text-slate-500 block mb-2 uppercase">Legend (ë²”ë¡€)</label>
              <div class="flex gap-4 items-center">
                <label class="inline-flex items-center text-sm"><input id="legendShow" type="checkbox" class="mr-2" checked /> í‘œì‹œ</label>
                <select id="legendPos" class="border text-sm p-1 rounded">
                  <option value="top right">ìš°ì¸¡ ìƒë‹¨</option>
                  <option value="top left">ì¢Œì¸¡ ìƒë‹¨</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="card md:col-span-2">
          <div class="font-bold border-b pb-2 mb-4 flex justify-between items-center">
            <span>ë°ì´í„° ê³„ì—´ ì„œì‹ ì„¤ì •</span>
            <span class="text-[10px] text-slate-400 font-normal">ê°œë³„ ê³„ì—´ì˜ ìƒ‰ìƒê³¼ ì‹¬ë³¼ì„ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</span>
          </div>
          <div id="seriesControls" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
        </div>
      </div>

      <div class="card flex flex-col md:flex-row gap-4 items-center justify-between bg-slate-800 text-white">
        <div class="flex items-center gap-4">
          <span class="font-bold text-sm">ì¶œë ¥ í•´ìƒë„(PX):</span>
          <input id="chartWidth" type="number" placeholder="Width" class="w-24 p-2 rounded bg-slate-700 border-none text-sm text-white focus:ring-2 focus:ring-blue-500" />
          <span class="text-slate-500">Ã—</span>
          <input id="chartHeight" type="number" placeholder="Height" class="w-24 p-2 rounded bg-slate-700 border-none text-sm text-white focus:ring-2 focus:ring-blue-500" />
        </div>
        <button id="btnUpdatePreview" class="w-full md:w-auto px-10 py-3 bg-blue-500 hover:bg-blue-400 text-white rounded-lg font-bold transition shadow-lg">ì„¤ì • ë³€ê²½ ì‚¬í•­ ì ìš©</button>
      </div>
    </div>

    <div class="mt-8">
      <div id="previewArea" class="card flex items-center justify-center border-dashed border-2 border-slate-300">
        <div class="text-center">
          <p class="text-slate-400 font-medium">ë°ì´í„°ë¥¼ ë¡œë“œí•˜ê³  'ê·¸ë˜í”„ ìƒì„±' ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.</p>
          <p class="text-slate-300 text-sm mt-1">ë…¼ë¬¸ìš© í‘œì¤€ í°íŠ¸ ë° í‘ë°± ì„¤ì •ì´ ìë™ ì ìš©ë©ë‹ˆë‹¤.</p>
        </div>
      </div>
    </div>
  </div>
  <script src="app.js"></script>
</body>
</html>
